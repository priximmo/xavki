<!DOCTYPE html>
<html>
  <head>
    <title>Scraping & Microservices - have fun !!!</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="./css/quasar.min.css" />
    <link rel="stylesheet" type="text/css" href="./css/pure-min.css" />
    <link rel="stylesheet" type="text/css" href="./css/spaces.css" />
    <link rel="stylesheet" type="text/css" href="./css/typo.css" />
    <link rel="stylesheet" type="text/css" href="./css/devices.min.css" />
    <link rel="stylesheet" type="text/css" href="./css/gh-fork-ribbon.css" />
    <link rel="stylesheet" type="text/css" href="./css/nord-dark.css" />
    <link rel="stylesheet" type="text/css" href="./css/nord-light.css" />
    <link rel="stylesheet" type="text/css" href="./css/font-nord.css" />
    <link rel="stylesheet" type="text/css" href="./css/bg-nord.css" />
    <link rel="stylesheet" type="text/css" href="./css/font-open-color.css" />
    <link rel="stylesheet" type="text/css" href="./css/bg-open-color.css" />
    <link rel="stylesheet" type="text/css" href="./css/material-icons.css" />
    <link rel="stylesheet" type="text/css" href="./css/abs-layout.css" />
    <link rel="stylesheet" type="text/css" href="./css/border-layout.css" />
    <link rel="stylesheet" type="text/css" href="./css/text-rect.css" />
    <link rel="stylesheet" type="text/css" href="./css/text-circle.css" />
    <link rel="stylesheet" type="text/css" href="./css/card.css" />
    <link rel="stylesheet" type="text/css" href="./css/lines.css" />
    <link rel="stylesheet" type="text/css" href="./css/filters.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <style type="text/css">
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Yanone Kaffeesatz'; }
      h1, h2, h3 {
        font-weight: normal;
        color: #0000CD;
        padding: 10px;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

background-image: linear-gradient(150deg, rgba(0, 0, 0, 100%), rgba(0, 0, 0, 85%), rgba(0, 0, 0, 40%)),url(img/bginter.jpg)
class: nord-dark, center,middle
<a class="github-fork-ribbon right-top" href="https://priximmo.github.io/xavki/" data-ribbon="XavkiSlides" title="XavkiSlides">Got to XavkiSlides</a>

# Scraping & Microservices...

##Have fun...

---

# Overview

.st.noborder.st-hline.font-lg.mb-xs[
| Part | Title |
| ---- | ---- |	
| [1](https://priximmo.github.io/xavki/microscraping/#3) | Purposes  |
| [2](https://priximmo.github.io/xavki/microscraping/#27) | Introduction |
| [3](https://priximmo.github.io/xavki/microscraping/#29) | Microservices : why ? |
| [4](https://priximmo.github.io/xavki/microscraping/#30) | Message Queues : why ? |
]

---

background-image: linear-gradient(150deg, rgba(0, 0, 0, 100%), rgba(0, 0, 0, 85%), rgba(0, 0, 0, 40%)),url(img/bginter.jpg)
class: nord-dark, center,middle

# Purposes

---

<small>Purposes</small>

## What ? 

--
- Scraping infrastructure

--
- Provision virtual servers

--
- Install softwares on our VM

--
- Minimum to understand for each technology

--
- Develop our code

---

<small>Purposes</small>

## What ? 

--
- All comments about a list of youtube channels

--
- list of channels

--
- discover all videos

--
- collect all comments

---

<small>Purposes</small>

## Why ?

--
- To learn how provision ? (many iterations from 0)

--
- To install and understand some background softwares

--
- To discover python and some librairies like selenium

--
- To discuss about concepts with simple examples

--
- An easy way to processing a bit of datas

---

<small>Purposes</small>

## How ?

--
- Without a great level in each technology (minimal knowledge)

--
- Vagrant for our provisionning (common for many people)

--
- Install and configure : elasticsearch, rabbitmq, prometheus...

--
- How to code with python ? selenium ?...

--
- SQL vs NoSQL, Document DB, Metrics DB, scaling...

---

background-image: linear-gradient(150deg, rgba(0, 0, 0, 100%), rgba(0, 0, 0, 85%), rgba(0, 0, 0, 40%)),url(img/bginter.jpg)
class: nord-dark, center,middle

# Introduction

---

<small>Introduction</small>

## What we need ?

--
- process = channels > videos > comments

--
- type of datas = text + metrics

--
- type of services : scrapers / inserter / api

---

<small>Introduction</small>

## What we need ?

--
- scrapers

```
selenium
chrome
more resources
slow workload
```

--
- inserters

```
just insert data into database
less resources
scale easily if queue usage
but no need to scale
```

--
- api :

```
flask
less resources
```

---

<small>Introduction</small>

## Our infrastructure

![](img/infra1.png)

---

<small>Introduction</small>

## Our infrastructure

![](img/infra2.png)

---

<small>Introduction</small>

## Our infrastructure

![](img/infra3.png)

    </textarea>

    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
    <script src="../js/remark.min.js"></script>
    <script src="../js/vue.js"></script>
    <script src="../js/quasar.umd.min.js"></script>
    <script src="../js/mermaid.min.js"></script>
    <script id="MathJax-script" async src="../js/tex-mml-chtml.js"></script>
    <script>
      // 预处理：去掉每行开头的空格，否则超过2层缩进的类会导致解析出BUG
      var targetTextArea = document.getElementById("source");
      var targetText = targetTextArea.innerHTML.replace(
        /```[^`]+```/gm,
        (match, index, input) => {
          return match.replace(/[ ]/gm, "\u3000");
        }
      );
      var lines = targetText.split("\n");

      targetTextArea.innerHTML = lines
        .map((line) => line.replace(/^(?![ ]+[\-|0-9])[ ]+/, ""))
        .map((line) => line.replace(/\u3000/g, " "))
        .join("\n");

      var slideshow = remark.create({
        ratio: "4:3", // 窗口比例
        // 可选：arta, ascetic, dark, default, far, github, googlecode, idea,
        // ir-black, magula, monokai, rainbow, solarized-dark, solarized-light,
        // sunburst, tomorrow, tomorrow-night-blue, tomorrow-night-bright,
        // tomorrow-night, tomorrow-night-eighties, vs, zenburn.
        highlightStyle: "github",
        highlightLines: true,
        countIncrementalSlides: false, // 增量内容是否算一页
        // slideNumberFormat: "", // 若将此参数设置为 ""，将不显示页码
        navigation: {
          scroll: false, // 是否允许使用鼠标滚轮翻页
          touch: true, // （如果是触摸屏）是否允许点击屏幕左边或右边前后翻页
          click: false, // 是否允许鼠标点击屏幕左边或右边前后翻页
        },
      });

      // 初始化 VUE
      for (var el of document.querySelectorAll(".vue")) {
        new Vue({
          el: el,
        });
      }

      // 初始化可点击预览的卡片
      var preview_win_cards = document.querySelectorAll(".preview-win");
      for (var card of preview_win_cards) {
        ((clickedCard) => {
          clickedCard.addEventListener("click", (e) => {
            var img = clickedCard.querySelector("img");
            if (img) {
              window.open(img.src);
            }
          });
        })(card);
      }

      // 背景色变化兼容 F11 全屏
      function isFullScreen() {
        return (
          window.fullScreen ||
          (window.innerWidth == screen.width &&
            window.innerHeight == screen.height)
        );
      }

      window.addEventListener("resize", () => {
        if (isFullScreen()) {
          document.body.style["background-color"] = "#000";
        } else {
          document.body.style["background-color"] = "#d7d8d2";
        }
      });

      // 初始化 mermaid
      mermaid.mermaidAPI.initialize({
        startOnLoad: false,
        theme: "forest",
        themeCSS:
          ".tick>text { font-size:26px; }  .taskTextOutsideRight,.taskTextOutsideLeft { font-size:20px; } .titleText {font-size:30px;} .sectionTitle {font-size:20px;}",
        gantt: {
          fontSize: 26,
          barHeight: 30,
          useMaxWidth: false,
        },
        gantt: {
          fontSize: 26,
          barHeight: 30,
          useMaxWidth: false,
        },
      });

      var mermaidCmps = document.querySelectorAll(".mermaid");
      for (var i = 0; i < mermaidCmps.length; i++) {
        var mermaidCmp = mermaidCmps[i];
        var insertSvg = function (svgCode, bindFunctions) {
          mermaidCmp.innerHTML = svgCode;
        };

        var graphDefinition = "";
        let pCmps = mermaidCmp.querySelectorAll("pre");
        for (var pCmp of pCmps) {
          graphDefinition += pCmp.textContent.replace(/\\n/g, "<br/>");
        }

        var graph = mermaid.mermaidAPI.render(
          "graphDiv" + i,
          graphDefinition,
          insertSvg
        );
      }

      // LaTeX
      MathJax = {
        loader: {
          load: ["input/tex-base", "[tex]/newcommand", "output/chtml"],
        },
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
        },
        options: {
          skipHtmlTags: [
            "script",
            "noscript",
            "style",
            "textarea",
            "pre",
            "code",
            "annotation",
            "annotation-xml",
          ],
          ignoreHtmlClass: "tex2jax_ignore",
        },
      };
    </script>

  </body>
</html>

